#!/bin/zsh

typeset opt dryrun=false mode
while getopts :n opt; do
    case $opt in
        (n) dryrun=true ;;
        (*) usage ;;
    esac
done
shift $(( OPTIND - 1 ))
mode=$1

if $dryrun; then
    if [[ $mode == full ]]; then
        eubar -m >&2
    else
        eubdiff $mode
    fi
elif [[ $mode == full ]]; then
    eubar
else
    eubdiff $mode | eubar -s
fi
